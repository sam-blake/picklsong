$('#playlist_songs').append("<div class='song' id='track_<%= @active_playlist.songs.length%>' data-video-id='<%=@song.video_id%>' data-track='<%= @active_playlist.songs.length%>' data-id='<%= @song.id.to_s %>' data-embed-url='<%= @song.embed_url %>' data-title='<%= @song.title %>'><div class='pl-song-thumb'><img src='<%= @song.thumbnail%>'></div><div class='pl-song-title' class='desc truncate line-clamp'><%= @song.title %></div><a class='song-delete-button'><i class='fa fa-times-circle-o'></i></a></div>");

$('.song-delete-button').click(function() {
    var song_id = $(this).parent().data('id');
    var playlist = $('.active-playlist').data('id');
    console.log(song_id);
    $.ajax({
        url: "/songs/" + song_id,
        type: "DELETE",
        data: {
            id: song_id,
            playlist: playlist
        }
    });
});

$('.pl-song-thumb').click(function() {
    var track = $(this).parent().data('track');
    console.log(track);
    var vidTitle = $(this).parent().data('title');
    var clickedSongId = $(this).parent().data('video-id');
    console.log(clickedSongId);
    $('#active-song-title').attr('data-track', track);
    $('#active-song-title').html(vidTitle);
    playClickedSong(clickedSongId);
            //changes video player to clicked song's video
            function playClickedSong(clickedSongId) {
                player.loadVideoById(clickedSongId);
            }
        });

var get_song_id = function(){
    return '<%= j Song.last.id.to_s %>';
};
